<div class="home-container p-p-4">
  <!-- Header Navbar -->
  <nav class="navbar">
    <div class="navbar-brand">
      <h1 class="navbar-title">Cafeteria Members</h1>
      <p class="navbar-subtitle">Manage member registrations</p>
    </div>
    <div class="navbar-actions">
      <button
        pButton
        type="button"
        label="Charts"
        icon="pi pi-chart-bar"
        (click)="navigateToCharts()"
        class="navbar-btn navbar-btn-charts"
      ></button>
      <button
        pButton
        type="button"
        label="Add Member"
        icon="pi pi-plus"
        (click)="openAddUser()"
        class="navbar-btn navbar-btn-add"
      ></button>
      <button
        pButton
        type="button"
        label="Logout"
        (click)="logout()"
        class="navbar-btn navbar-btn-logout"
      ></button>
    </div>
  </nav>

  <p-toast></p-toast>

  <app-members-table
    #membersTable
    (openAdd)="openAddUser()"
  >
    <p-splitButton
      excel-actions
      label="Excel"
      icon="pi pi-file-excel"
      class="action-btn action-btn-excel"
      [model]="excelMenuItems"
    ></p-splitButton>
  </app-members-table>

  <app-bulk-excel-dialog
    [(visible)]="bulkDialogVisible"
    (uploadComplete)="onBulkUploadComplete()"
  ></app-bulk-excel-dialog>

  <!-- Add Dialog -->
  <p-dialog
    [(visible)]="displayAddDialog"
    [modal]="true"
    [style]="{ width: '800px', 'max-width': '95vw' }"
    [maximizable]="true"
    [draggable]="false"
    [resizable]="false"
    header="Add New Member"
    (onHide)="onDialogHide()"
    [contentStyle]="{ 'max-height': 'calc(100vh - 200px)', 'overflow-y': 'auto', 'overflow-x': 'hidden' }"
    styleClass="add-member-dialog"
    [baseZIndex]="10000"
  >
    <app-user-form
      [user]="null"
      (saved)="onUserSaved()"
      (cancelled)="onDialogHide()"
    ></app-user-form>
  </p-dialog>
</div>
